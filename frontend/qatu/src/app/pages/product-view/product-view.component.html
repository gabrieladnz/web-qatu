<app-navbar style="position: relative;"></app-navbar>

<main class="product">
    <section class="product__container">
        <div class="product__gallery">
            <figure class="product__figure">
                <img class="product__image" [src]="product.image" [alt]="product.title">
            </figure>
        </div>

        <div class="product__info">
            <h1 class="product__title">{{ product.title }}</h1>

            <div class="product__category">
                <span class="product__category-tag">{{ product.category | titlecase }}</span>
            </div>

            <div class="product__rating">
                <div class="product__stars">
                    <span class="product__star" *ngFor="let star of [1,2,3,4,5]; let i = index"
                        [class.product__star--filled]="i < getLastRatingScore()"
                        [class.product__star--empty]="i >= getLastRatingScore()">
                        ★
                    </span>
                </div>
                <span class="product__reviews">({{ product.ratings?.length || 0 }} {{ getReviewText() }})</span>
            </div>

            <div class="product__delivery">
                <span class="product__delivery-text">Entrega grátis</span>
            </div>

            <div class="product__price">
                <span class="product__price-currency">R$</span>
                <span class="product__price-value">{{ product.price | currency:'BRL':'':'1.2-2':'pt-BR' }}</span>
            </div>

            <div class="product__stock">
                <span class="product__stock-text">Em estoque: {{ product.stock }} unidade</span>
            </div>

            <div class="product__description">
                <h2 class="product__description-title">Descrição</h2>
                <p class="product__description-text">{{ product.description }}</p>
            </div>

            <button class="product__buy-button" [disabled]="!isAuthenticated" (click)="addToCart(product)">COMPRAR</button>
        </div>
    </section>
</main>

<app-footer></app-footer>
